!function(){"use strict";var e={},n=/[^\s\u00a0]/,t=CodeMirror.Pos;function i(e){var t=e.search(n);return-1==t?0:t}CodeMirror.commands.toggleComment=function(e){var n=e.getCursor("start"),t=e.getCursor("end");e.uncomment(n,t)||e.lineComment(n,t)},CodeMirror.defineExtension("lineComment",(function(l,o,r){r||(r=e);var a=this,m=a.getModeAt(l),c=r.lineComment||m.lineComment;if(c){var g=a.getLine(l.line);if(null!=g){var s=Math.min(0!=o.ch||o.line==l.line?o.line+1:o.line,a.lastLine()+1),f=null==r.padding?" ":r.padding,d=r.commentBlankLines||l.line==o.line;a.operation((function(){if(r.indent)for(var e=g.slice(0,i(g)),o=l.line;o<s;++o){var m=a.getLine(o),C=e.length;(d||n.test(m))&&(m.slice(0,C)!=e&&(C=i(m)),a.replaceRange(e+c+f,t(o,0),t(o,C)))}else for(o=l.line;o<s;++o)(d||n.test(a.getLine(o)))&&a.replaceRange(c+f,t(o,0))}))}}else(r.blockCommentStart||m.blockCommentStart)&&(r.fullLines=!0,a.blockComment(l,o,r))})),CodeMirror.defineExtension("blockComment",(function(i,l,o){o||(o=e);var r=this,a=r.getModeAt(i),m=o.blockCommentStart||a.blockCommentStart,c=o.blockCommentEnd||a.blockCommentEnd;if(m&&c){var g=Math.min(l.line,r.lastLine());g!=i.line&&0==l.ch&&n.test(r.getLine(g))&&--g;var s=null==o.padding?" ":o.padding;i.line>g||r.operation((function(){if(0!=o.fullLines){var e=n.test(r.getLine(g));r.replaceRange(s+c,t(g)),r.replaceRange(m+s,t(i.line,0));var f=o.blockCommentLead||a.blockCommentLead;if(null!=f)for(var d=i.line+1;d<=g;++d)(d!=g||e)&&r.replaceRange(f+s,t(d,0))}else r.replaceRange(c,l),r.replaceRange(m,i)}))}else(o.lineComment||a.lineComment)&&0!=o.fullLines&&r.lineComment(i,l,o)})),CodeMirror.defineExtension("uncomment",(function(i,l,o){o||(o=e);var r,a=this,m=a.getModeAt(i),c=Math.min(l.line,a.lastLine()),g=Math.min(i.line,c),s=o.lineComment||m.lineComment,f=[],d=null==o.padding?" ":o.padding;e:if(s){for(var C=g;C<=c;++C){var u=a.getLine(C),v=u.indexOf(s);if(-1==v&&(C!=c||C==g)&&n.test(u))break e;if(C!=g&&v>-1&&n.test(u.slice(0,v)))break e;f.push(u)}if(a.operation((function(){for(var e=g;e<=c;++e){var n=f[e-g],i=n.indexOf(s),l=i+s.length;i<0||(n.slice(l,l+d.length)==d&&(l+=d.length),r=!0,a.replaceRange("",t(e,i),t(e,l)))}})),r)return!0}var h=o.blockCommentStart||m.blockCommentStart,p=o.blockCommentEnd||m.blockCommentEnd;if(!h||!p)return!1;var L=o.blockCommentLead||m.blockCommentLead,k=a.getLine(g),b=c==g?k:a.getLine(c),M=k.indexOf(h),R=b.lastIndexOf(p);return-1==R&&g!=c&&(b=a.getLine(--c),R=b.lastIndexOf(p)),-1!=M&&-1!=R&&(a.operation((function(){a.replaceRange("",t(c,R-(d&&b.slice(R-d.length,R)==d?d.length:0)),t(c,R+p.length));var e=M+h.length;if(d&&k.slice(e,e+d.length)==d&&(e+=d.length),a.replaceRange("",t(g,M),t(g,e)),L)for(var i=g+1;i<=c;++i){var l=a.getLine(i),o=l.indexOf(L);if(-1!=o&&!n.test(l.slice(0,o))){var r=o+L.length;d&&l.slice(r,r+d.length)==d&&(r+=d.length),a.replaceRange("",t(i,o),t(i,r))}}})),!0)}))}();