!function(){var t=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||document.documentMode<8),e=CodeMirror.Pos,n={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"};function r(t,r,o){var i=t.state.matchBrackets,a=i&&i.maxScanLineLength||1e4,c=r||t.getCursor(),h=t.getLineHandle(c.line),l=c.ch-1,u=l>=0&&n[h.text.charAt(l)]||n[h.text.charAt(++l)];if(!u)return null;var f=">"==u.charAt(1),s=f?1:-1;if(o&&f!=(l==c.ch))return null;var m=t.getTokenTypeAt(e(c.line,l+1)),d=[h.text.charAt(l)],g=/[(){}[\]]/;function v(r,o,i){if(r.text){var c=f?0:r.text.length-1,h=f?r.text.length:-1;if(r.text.length>a)return null;for(null!=i&&(c=i+s);c!=h;c+=s){var l=r.text.charAt(c);if(g.test(l)&&t.getTokenTypeAt(e(o,c+1))==m){var u=n[l];if(">"==u.charAt(1)==f)d.push(l);else{if(d.pop()!=u.charAt(0))return{pos:c,match:!1};if(!d.length)return{pos:c,match:!0}}}}}}for(var x,p=c.line,M=f?Math.min(p+100,t.lineCount()):Math.max(-1,p-100);p!=M&&!(x=p==c.line?v(h,p,l):v(t.getLineHandle(p),p));p+=s);return{from:e(c.line,l),to:x&&e(p,x.pos),match:x&&x.match,forward:f}}function o(n,o){var i=n.state.matchBrackets.maxHighlightLineLength||1e3,a=r(n);if(!(!a||n.getLine(a.from.line).length>i||a.to&&n.getLine(a.to.line).length>i)){var c=a.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",h=n.markText(a.from,e(a.from.line,a.from.ch+1),{className:c}),l=a.to&&n.markText(a.to,e(a.to.line,a.to.ch+1),{className:c});t&&n.state.focused&&n.display.input.focus();var u=function(){n.operation((function(){h.clear(),l&&l.clear()}))};if(!o)return u;setTimeout(u,800)}}var i=null;function a(t){t.operation((function(){i&&(i(),i=null),t.somethingSelected()||(i=o(t,!1))}))}CodeMirror.defineOption("matchBrackets",!1,(function(t,e,n){n&&n!=CodeMirror.Init&&t.off("cursorActivity",a),e&&(t.state.matchBrackets="object"==typeof e?e:{},t.on("cursorActivity",a))})),CodeMirror.defineExtension("matchBrackets",(function(){o(this,!0)})),CodeMirror.defineExtension("findMatchingBracket",(function(t,e){return r(this,t,e)}))}();